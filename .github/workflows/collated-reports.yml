name: CI collated reports
on:
  workflow_dispatch: {}
jobs:
  collated_reports:
    name: Collated reports
    runs-on: ubuntu-22.04
    if: always()
    steps:
    - uses: actions/checkout@v4
    - uses: actions/download-artifact@v4
    - name: Collated reports
      shell: bash
      env:
        ACCESS_REPO_INFO_TOKEN: ${{ secrets.ACCESS_REPO_INFO_TOKEN }}
        CI_SHA: ${{ github.sha }}
        TRANSFORMERS_CI_RESULTS_UPLOAD_TOKEN: ${{ secrets.TRANSFORMERS_CI_RESULTS_UPLOAD_TOKEN
          }}
      run: "pip install huggingface_hub\npython3 utils/collated_reports.py       \
        \           \\\n  --path .                                         \\\n  --machine-type\
        \ ${{ inputs.machine_type }}        \\\n  --commit-hash ${{ env.CI_SHA }}\
        \                  \\\n  --job ${{ inputs.job }}                         \
        \ \\\n  --report-repo-id ${{ inputs.report_repo_id }}    \\\n  --gpu-name\
        \ ${{ inputs.gpu_name }}\n"
